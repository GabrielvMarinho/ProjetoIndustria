{% extends "base.html" %}

{% block title %} Add Relação {% endblock %}

{% block content %}

    <p>aqui um dados específico</p>
    <h1 id="dado">{{maquinas}}</h1>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script>
<script>
    const socket = io();


    socket.on('atualizar_dados', function() {
        buscarDados()
    });
    
    async function buscarDados() {
        const resp = await fetch("/retornar_dados"); // mudar no deploy
        const dados = await resp.json();
        console.log(dados);
        
        Object.keys(dados).forEach(i => {
            const h1 = document.createElement("h1")
            h1.innerText = "";

            h1.innerText += i + " - \n";
            console.log(i);

            document.body.appendChild(h1)
            const h2 = document.createElement("h2")

        });
    }

</script>

{% endblock %}